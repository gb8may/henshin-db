export const I18N = {
  pt: {
    home: "Home",
    themes: "Temas",
    theme: "Tema",
    chooseTheme: "Escolha um tema para navegar.",
    offline: "Offline",
    offlineTitle: "Sem conexão",
    offlineHint: "Você está offline (ou o banco não respondeu). Vou tentar usar o último cache salvo.",
    offlineRetryLabel: "Tentar reconectar",
    offlineRetryHint: "Testar conexão com o Supabase",
    offlineHomeLabel: "Voltar para Home",
    offlineHomeHint: "Navegar pelas categorias",
    back: "Voltar",
    hubCharactersLabel: "Personagens",
    hubCharactersHint: "Lista completa (A–Z)",
    hubGlossaryLabel: "Glossário",
    hubGlossaryHint: "Termos JP → PT/EN",
    hubPublicationsLabel: "Publicações",
    hubPublicationsHint: "Livros, mooks, guias",
    hubCollectiblesLabel: "Colecionáveis",
    hubCollectiblesHint: "DX, SHF, sofubi, etc.",
    characters: "Personagens",
    glossary: "Glossário",
    publications: "Publicações",
    collectibles: "Colecionáveis",
    searchCharacters: "Buscar por nome (EN/PT/JP/romaji)...",
    searchGlossary: "Buscar por JP/romaji/EN/PT...",
    allCategories: "Todas",
    searchPublications: "Buscar por título, tipo, ano, editora...",
    allTypes: "Todos",
    searchCollectibles: "Buscar por nome, linha, fabricante, tipo...",
    modalOpenLink: "Abrir link",
    modalDetails: "Detalhes",
    online: "Online",
    offlineChip: "Offline",
    connError: "Conexão com erro",
    loading: "Carregando...",
    noResults: "Nenhum resultado.",
    noDetails: "Sem detalhes.",
    noCacheAvailable: "Sem cache disponível.",
    deviceNoInternet: "Seu dispositivo está sem internet.",
    noInternet: "Sem conexão com a internet.",
    testingConnection: "Testando conexão...",
    stillNoResponse: "Ainda sem resposta do Supabase. Tente novamente em instantes.",
    cacheSuffix: "cache",
    items: "itens",
    terms: "termos",
    publicationsItems: "itens",
    charactersItems: "itens",
    collectiblesItems: "itens",
    justNow: "agora há pouco",
    minutesShort: "min",
    hoursShort: "h",
    daysShort: "d",
    language: "Idioma",
    footerAuthor: "Autora",
    footerVersion: "v0.1",
    usefulLinks: "Links Úteis",
    usefulHint: "Selecione uma seção.",
    usefulActors: "Atores e Atrizes",
    usefulCommunity: "Comunidade",
    usefulLives: "Lives",
    usefulCollectibles: "Colecionáveis",
    usefulSearch: "Buscar...",
    verifiedHint: "Links oficiais / autorizados",
    spec_name_pt: "Nome (PT)",
    spec_name_en: "Nome (EN)",
    spec_name_jp: "Nome (JP)",
    spec_title_pt: "Título (PT)",
    spec_title_en: "Título (EN)",
    spec_title_jp: "Título (JP)",
    spec_romaji: "Romaji",
    spec_franchise: "Franquia",
    spec_year: "Ano",
    spec_month: "Mês",
    spec_era: "Era",
    spec_description: "Descrição",
    spec_powers: "Poderes",
    spec_equipment: "Equipamentos",
    spec_actor: "Ator",
    spec_civil_pt: "Nome civil (PT)",
    spec_civil_en: "Nome civil (EN)",
    spec_civil_jp: "Nome civil (JP)",
    spec_type: "Tipo",
    spec_publisher: "Editora",
    spec_issue: "Edição",
    spec_language: "Idioma",
    spec_isbn: "ISBN",
    spec_notes: "Notas",
    spec_url: "URL",
    spec_line: "Linha",
    spec_manufacturer: "Fabricante",
    spec_series_code: "Series code",
    spec_sku: "SKU",
    spec_status: "Status",
    spec_rarity: "Raridade",
    spec_jp_search: "JP search",
    spec_category: "Categoria",
    spec_explanation: "Explicação",
    spec_jp: "JP",
    spec_en: "EN",
    spec_pt: "PT",
  },
  en: {
    home: "Home",
    themes: "Themes",
    theme: "Theme",
    chooseTheme: "Pick a theme to browse.",
    offline: "Offline",
    offlineTitle: "No connection",
    offlineHint: "You're offline (or the database didn't respond). I'll try to use the last saved cache.",
    offlineRetryLabel: "Retry connection",
    offlineRetryHint: "Test connection with Supabase",
    offlineHomeLabel: "Back to Home",
    offlineHomeHint: "Browse categories",
    back: "Back",
    hubCharactersLabel: "Characters",
    hubCharactersHint: "Full list (A–Z)",
    hubGlossaryLabel: "Glossary",
    hubGlossaryHint: "JP → EN/PT terms",
    hubPublicationsLabel: "Publications",
    hubPublicationsHint: "Books, mooks, guides",
    hubCollectiblesLabel: "Collectibles",
    hubCollectiblesHint: "DX, SHF, sofubi, etc.",
    characters: "Characters",
    glossary: "Glossary",
    publications: "Publications",
    collectibles: "Collectibles",
    searchCharacters: "Search by name (EN/PT/JP/romaji)...",
    searchGlossary: "Search by JP/romaji/EN/PT...",
    allCategories: "All",
    searchPublications: "Search by title, type, year, publisher...",
    allTypes: "All",
    searchCollectibles: "Search by name, line, maker, type...",
    modalOpenLink: "Open link",
    modalDetails: "Details",
    online: "Online",
    offlineChip: "Offline",
    connError: "Connection error",
    loading: "Loading...",
    noResults: "No results.",
    noDetails: "No details.",
    noCacheAvailable: "No cache available.",
    deviceNoInternet: "Your device is offline.",
    noInternet: "No internet connection.",
    testingConnection: "Testing connection...",
    stillNoResponse: "Still no response from Supabase. Try again in a moment.",
    cacheSuffix: "cache",
    items: "items",
    terms: "terms",
    publicationsItems: "items",
    charactersItems: "items",
    collectiblesItems: "items",
    justNow: "just now",
    minutesShort: "min",
    hoursShort: "h",
    daysShort: "d",
    language: "Language",
    footerAuthor: "Author",
    footerVersion: "v0.1",
    usefulLinks: "Useful Links",
    usefulHint: "Pick a section.",
    usefulActors: "Actors & Actresses",
    usefulCommunity: "Community",
    usefulLives: "Lives",
    usefulCollectibles: "Collectibles",
    usefulSearch: "Search...",
    verifiedHint: "Official / authorized links",
    spec_name_pt: "Name (PT)",
    spec_name_en: "Name (EN)",
    spec_name_jp: "Name (JP)",
    spec_title_pt: "Title (PT)",
    spec_title_en: "Title (EN)",
    spec_title_jp: "Title (JP)",
    spec_romaji: "Romaji",
    spec_franchise: "Franchise",
    spec_year: "Year",
    spec_month: "Month",
    spec_era: "Era",
    spec_description: "Description",
    spec_powers: "Powers",
    spec_equipment: "Equipment",
    spec_actor: "Actor",
    spec_civil_pt: "Civil name (PT)",
    spec_civil_en: "Civil name (EN)",
    spec_civil_jp: "Civil name (JP)",
    spec_type: "Type",
    spec_publisher: "Publisher",
    spec_issue: "Issue",
    spec_language: "Language",
    spec_isbn: "ISBN",
    spec_notes: "Notes",
    spec_url: "URL",
    spec_line: "Line",
    spec_manufacturer: "Manufacturer",
    spec_series_code: "Series code",
    spec_sku: "SKU",
    spec_status: "Status",
    spec_rarity: "Rarity",
    spec_jp_search: "JP search",
    spec_category: "Category",
    spec_explanation: "Explanation",
    spec_jp: "JP",
    spec_en: "EN",
    spec_pt: "PT",
  },
  ja: {
    home: "ホーム",
    themes: "テーマ",
    theme: "テーマ",
    chooseTheme: "テーマを選んでください。",
    offline: "オフライン",
    offlineTitle: "接続なし",
    offlineHint: "オフライン（またはDBが応答しません）。最後のキャッシュを使います。",
    offlineRetryLabel: "再接続",
    offlineRetryHint: "Supabase への接続をテスト",
    offlineHomeLabel: "ホームへ",
    offlineHomeHint: "カテゴリを見る",
    back: "戻る",
    hubCharactersLabel: "キャラクター",
    hubCharactersHint: "一覧（A–Z）",
    hubGlossaryLabel: "用語集",
    hubGlossaryHint: "JP → EN/PT",
    hubPublicationsLabel: "出版物",
    hubPublicationsHint: "書籍・ムック・ガイド",
    hubCollectiblesLabel: "コレクション",
    hubCollectiblesHint: "DX、SHF、ソフビなど",
    characters: "キャラクター",
    glossary: "用語集",
    publications: "出版物",
    collectibles: "コレクション",
    searchCharacters: "名前で検索（EN/PT/JP/ローマ字）…",
    searchGlossary: "検索（JP/ローマ字/EN/PT）…",
    allCategories: "すべて",
    searchPublications: "検索（タイトル/種類/年/出版社）…",
    allTypes: "すべて",
    searchCollectibles: "検索（名前/ライン/メーカー/種類）…",
    modalOpenLink: "リンクを開く",
    modalDetails: "詳細",
    online: "オンライン",
    offlineChip: "オフライン",
    connError: "接続エラー",
    loading: "読み込み中…",
    noResults: "結果なし。",
    noDetails: "詳細なし。",
    noCacheAvailable: "キャッシュがありません。",
    deviceNoInternet: "端末がオフラインです。",
    noInternet: "インターネット接続なし。",
    testingConnection: "接続を確認中…",
    stillNoResponse: "Supabase から応答がありません。しばらくして再試行してください。",
    cacheSuffix: "キャッシュ",
    items: "件",
    terms: "件",
    publicationsItems: "件",
    charactersItems: "件",
    collectiblesItems: "件",
    justNow: "たった今",
    minutesShort: "分",
    hoursShort: "時間",
    daysShort: "日",
    language: "言語",
    footerAuthor: "作者",
    footerVersion: "v0.1",
    usefulLinks: "便利リンク",
    usefulHint: "セクションを選んでください。",
    usefulActors: "俳優・女優",
    usefulCommunity: "コミュニティ",
    usefulLives: "ライブ",
    usefulCollectibles: "コレクション",
    usefulSearch: "検索…",
    verifiedHint: "公式 / 許可済みリンク",
    spec_name_pt: "名前（PT）",
    spec_name_en: "名前（EN）",
    spec_name_jp: "名前（JP）",
    spec_romaji: "ローマ字",
    spec_franchise: "シリーズ",
    spec_year: "年",
    spec_month: "月",
    spec_era: "時代",
    spec_description: "説明",
    spec_powers: "能力",
    spec_equipment: "装備",
    spec_actor: "俳優",
    spec_civil_pt: "本名（PT）",
    spec_civil_en: "本名（EN）",
    spec_civil_jp: "本名（JP）",
    spec_type: "種類",
    spec_publisher: "出版社",
    spec_issue: "号",
    spec_language: "言語",
    spec_isbn: "ISBN",
    spec_notes: "メモ",
    spec_url: "URL",
    spec_line: "ライン",
    spec_manufacturer: "メーカー",
    spec_series_code: "シリーズコード",
    spec_sku: "SKU",
    spec_status: "状態",
    spec_rarity: "レア度",
    spec_jp_search: "JP検索",
    spec_category: "カテゴリ",
    spec_explanation: "解説",
    spec_jp: "JP",
    spec_en: "EN",
    spec_pt: "PT",
  },
};

const LANG_STORAGE_KEY = "henshin_lang";

export function pickLangFromDevice() {
  const raw = (navigator.languages?.[0] || navigator.language || "en").toLowerCase();
  if (raw.startsWith("pt")) return "pt";
  if (raw.startsWith("ja")) return "ja";
  return "en";
}

export function getSavedLang() {
  try {
    const v = String(localStorage.getItem(LANG_STORAGE_KEY) || "").toLowerCase();
    if (v === "pt" || v === "en" || v === "ja") return v;
  } catch {}
  return "";
}

export function saveLang(lang) {
  try {
    localStorage.setItem(LANG_STORAGE_KEY, lang);
  } catch {}
}

export function t(key, lang = "en") {
  return (I18N[lang] && I18N[lang][key]) || (I18N.en[key]) || key;
}

export function formatFranchise(key) {
  if (!key) return t("theme");
  if (key === "kamen rider") return "Kamen Rider";
  if (key === "super sentai") return "Super Sentai";
  if (key === "metal hero") return "Metal Hero";
  if (key === "ultraman") return "Ultraman";
  if (key === "cybercops") return "Cybercops";
  return key;
}

